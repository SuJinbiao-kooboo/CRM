<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.crm.supplier.mapper.CrmSupplierContactMapper">
    
    <resultMap id="CrmSupplierContactResult" type="com.crm.supplier.domain.CrmSupplierContact">
        <result property="id" column="id"/>
        <result property="supplierId" column="supplier_id"/>
        <result property="contactName" column="contact_name"/>
        <result property="position" column="position"/>
        <result property="phone" column="phone"/>
        <result property="email" column="email"/>
        <result property="whatsapp" column="whatsapp"/>
        <result property="wechat" column="wechat"/>
        <result property="qq" column="qq"/>
        <result property="otherContact" column="other_contact"/>
        <result property="isPrimary" column="is_primary"/>
        <result property="createBy" column="create_by"/>
        <result property="createTime" column="create_time"/>
        <result property="updateBy" column="update_by"/>
        <result property="updateTime" column="update_time"/>
        <result property="remark" column="remark"/>
    </resultMap>

    <sql id="selectCrmSupplierContactVo">
        select id, supplier_id, contact_name, position, phone, email, whatsapp, wechat, qq, other_contact, is_primary, create_by, create_time, update_by, update_time
        from crm_supplier_contact
    </sql>

    <select id="selectContactsBySupplierId" parameterType="Long" resultMap="CrmSupplierContactResult">
        <include refid="selectCrmSupplierContactVo"/>
        where supplier_id = #{supplierId}
        order by is_primary desc, id asc
    </select>

    <delete id="deleteBySupplierId" parameterType="Long">
        delete from crm_supplier_contact where supplier_id = #{supplierId}
    </delete>

</mapper>