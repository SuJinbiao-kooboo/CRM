-- CRM系统菜单初始化数据
USE crm_system;

-- 清空现有菜单数据
DELETE FROM sys_role_menu;
DELETE FROM sys_menu;

-- 插入菜单数据
INSERT INTO sys_menu (id, menu_name, parent_id, order_num, path, component, menu_type, visible, status, perms, icon, remark) VALUES
-- 一级菜单
(1, '首页', 0, 1, '/dashboard', 'Layout', 'M', 1, 1, '', 'dashboard', '首页'),
(2, '系统管理', 0, 10, '/system', 'Layout', 'M', 1, 1, '', 'system', '系统管理'),
(3, '线索管理', 0, 2, '/lead', 'Layout', 'M', 1, 1, '', 'lead', '线索管理'),
(4, '客户管理', 0, 3, '/customer', 'Layout', 'M', 1, 1, '', 'customer', '客户管理'),
(5, '订单管理', 0, 4, '/order', 'Layout', 'M', 1, 1, '', 'order', '订单管理'),
(6, '库存管理', 0, 5, '/inventory', 'Layout', 'M', 1, 1, '', 'inventory', '库存管理'),
(7, '询价管理', 0, 6, '/inquiry', 'Layout', 'M', 1, 1, '', 'inquiry', '询价管理'),
(8, '供应商管理', 0, 7, '/supplier', 'Layout', 'M', 1, 1, '', 'supplier', '供应商管理'),
(9, '报表统计', 0, 8, '/report', 'Layout', 'M', 1, 1, '', 'chart', '报表统计'),

-- 首页子菜单
(101, '首页', 1, 1, 'index', 'dashboard/index', 'C', 1, 1, 'dashboard:view', 'dashboard', '首页'),

-- 系统管理子菜单
(201, '字典管理', 2, 1, 'dict', 'system/dict/index', 'C', 1, 1, 'system:dict:list', 'dict', '字典管理'),
(202, '用户管理', 2, 2, 'user', 'system/user/index', 'C', 1, 1, 'system:user:list', 'user', '用户管理'),
(203, '角色管理', 2, 3, 'role', 'system/role/index', 'C', 1, 1, 'system:role:list', 'peoples', '角色管理'),
(204, '部门管理', 2, 4, 'dept', 'system/dept/index', 'C', 1, 1, 'system:dept:list', 'tree', '部门管理'),
(205, '菜单管理', 2, 5, 'menu', 'system/menu/index', 'C', 1, 1, 'system:menu:list', 'tree-table', '菜单管理'),
(206, '操作日志', 2, 6, 'operlog', 'system/operlog/index', 'C', 1, 1, 'system:operlog:list', 'form', '操作日志'),

-- 线索管理子菜单
(301, '线索列表', 3, 1, 'list', 'lead/index', 'C', 1, 1, 'lead:list', 'list', '线索列表'),
(302, '线索跟进', 3, 2, 'follow', 'lead/follow', 'C', 1, 1, 'lead:follow', 'edit', '线索跟进'),

-- 客户管理子菜单
(401, '客户列表', 4, 1, 'list', 'customer/index', 'C', 1, 1, 'customer:list', 'list', '客户列表'),
(402, '客户跟进', 4, 2, 'follow', 'customer/follow', 'C', 1, 1, 'customer:follow', 'edit', '客户跟进'),

-- 订单管理子菜单
(501, '订单列表', 5, 1, 'list', 'order/index', 'C', 1, 1, 'order:list', 'list', '订单列表'),
(502, '订单统计', 5, 2, 'statistics', 'order/statistics', 'C', 1, 1, 'order:statistics', 'chart', '订单统计'),

-- 库存管理子菜单
(601, '库存列表', 6, 1, 'list', 'inventory/index', 'C', 1, 1, 'inventory:list', 'list', '库存列表'),
(602, '库存导入', 6, 2, 'import', 'inventory/import', 'C', 1, 1, 'inventory:import', 'upload', '库存导入'),
(603, '库存导出', 6, 3, 'export', 'inventory/export', 'C', 1, 1, 'inventory:export', 'download', '库存导出'),

-- 询价管理子菜单
(701, '询价列表', 7, 1, 'list', 'inquiry/index', 'C', 1, 1, 'inquiry:list', 'list', '询价列表'),
(702, '报价管理', 7, 2, 'quotation', 'inquiry/quotation', 'C', 1, 1, 'inquiry:quotation', 'money', '报价管理'),

-- 供应商管理子菜单
(801, '供应商列表', 8, 1, 'list', 'supplier/index', 'C', 1, 1, 'supplier:list', 'list', '供应商列表'),

-- 报表统计子菜单
(901, '销售报表', 9, 1, 'sales', 'report/sales', 'C', 1, 1, 'report:sales', 'chart', '销售报表'),
(902, '客户报表', 9, 2, 'customer', 'report/customer', 'C', 1, 1, 'report:customer', 'chart', '客户报表'),
(903, '订单报表', 9, 3, 'order', 'report/order', 'C', 1, 1, 'report:order', 'chart', '订单报表');

-- 插入按钮权限
INSERT INTO sys_menu (id, menu_name, parent_id, order_num, path, component, menu_type, visible, status, perms, icon, remark) VALUES
-- 字典管理按钮
(2011, '字典查询', 201, 1, '', '', 'F', 1, 1, 'system:dict:query', '#', ''),
(2012, '字典新增', 201, 2, '', '', 'F', 1, 1, 'system:dict:add', '#', ''),
(2013, '字典修改', 201, 3, '', '', 'F', 1, 1, 'system:dict:edit', '#', ''),
(2014, '字典删除', 201, 4, '', '', 'F', 1, 1, 'system:dict:remove', '#', ''),
(2015, '字典导出', 201, 5, '', '', 'F', 1, 1, 'system:dict:export', '#', ''),

-- 用户管理按钮
(2021, '用户查询', 202, 1, '', '', 'F', 1, 1, 'system:user:query', '#', ''),
(2022, '用户新增', 202, 2, '', '', 'F', 1, 1, 'system:user:add', '#', ''),
(2023, '用户修改', 202, 3, '', '', 'F', 1, 1, 'system:user:edit', '#', ''),
(2024, '用户删除', 202, 4, '', '', 'F', 1, 1, 'system:user:remove', '#', ''),
(2025, '用户导出', 202, 5, '', '', 'F', 1, 1, 'system:user:export', '#', ''),
(2026, '用户导入', 202, 6, '', '', 'F', 1, 1, 'system:user:import', '#', ''),
(2027, '重置密码', 202, 7, '', '', 'F', 1, 1, 'system:user:resetPwd', '#', ''),

-- 角色管理按钮
(2031, '角色查询', 203, 1, '', '', 'F', 1, 1, 'system:role:query', '#', ''),
(2032, '角色新增', 203, 2, '', '', 'F', 1, 1, 'system:role:add', '#', ''),
(2033, '角色修改', 203, 3, '', '', 'F', 1, 1, 'system:role:edit', '#', ''),
(2034, '角色删除', 203, 4, '', '', 'F', 1, 1, 'system:role:remove', '#', ''),
(2035, '角色导出', 203, 5, '', '', 'F', 1, 1, 'system:role:export', '#', ''),

-- 部门管理按钮
(2041, '部门查询', 204, 1, '', '', 'F', 1, 1, 'system:dept:query', '#', ''),
(2042, '部门新增', 204, 2, '', '', 'F', 1, 1, 'system:dept:add', '#', ''),
(2043, '部门修改', 204, 3, '', '', 'F', 1, 1, 'system:dept:edit', '#', ''),
(2044, '部门删除', 204, 4, '', '', 'F', 1, 1, 'system:dept:remove', '#', ''),

-- 菜单管理按钮
(2051, '菜单查询', 205, 1, '', '', 'F', 1, 1, 'system:menu:query', '#', ''),
(2052, '菜单新增', 205, 2, '', '', 'F', 1, 1, 'system:menu:add', '#', ''),
(2053, '菜单修改', 205, 3, '', '', 'F', 1, 1, 'system:menu:edit', '#', ''),
(2054, '菜单删除', 205, 4, '', '', 'F', 1, 1, 'system:menu:remove', '#', ''),

-- 线索管理按钮
(3011, '线索查询', 301, 1, '', '', 'F', 1, 1, 'lead:query', '#', ''),
(3012, '线索新增', 301, 2, '', '', 'F', 1, 1, 'lead:add', '#', ''),
(3013, '线索修改', 301, 3, '', '', 'F', 1, 1, 'lead:edit', '#', ''),
(3014, '线索删除', 301, 4, '', '', 'F', 1, 1, 'lead:remove', '#', ''),
(3015, '线索导出', 301, 5, '', '', 'F', 1, 1, 'lead:export', '#', ''),
(3016, '线索转客户', 301, 6, '', '', 'F', 1, 1, 'lead:convert', '#', ''),
(3017, '线索标签', 301, 7, '', '', 'F', 1, 1, 'lead:tag', '#', ''),

-- 线索跟进按钮
(3021, '跟进查询', 302, 1, '', '', 'F', 1, 1, 'lead:follow:query', '#', ''),
(3022, '跟进新增', 302, 2, '', '', 'F', 1, 1, 'lead:follow:add', '#', ''),
(3023, '跟进修改', 302, 3, '', '', 'F', 1, 1, 'lead:follow:edit', '#', ''),
(3024, '跟进删除', 302, 4, '', '', 'F', 1, 1, 'lead:follow:remove', '#', ''),

-- 客户管理按钮
(4011, '客户查询', 401, 1, '', '', 'F', 1, 1, 'customer:query', '#', ''),
(4012, '客户新增', 401, 2, '', '', 'F', 1, 1, 'customer:add', '#', ''),
(4013, '客户修改', 401, 3, '', '', 'F', 1, 1, 'customer:edit', '#', ''),
(4014, '客户删除', 401, 4, '', '', 'F', 1, 1, 'customer:remove', '#', ''),
(4015, '客户导出', 401, 5, '', '', 'F', 1, 1, 'customer:export', '#', ''),
(4016, '客户标签', 401, 6, '', '', 'F', 1, 1, 'customer:tag', '#', ''),
(4017, '查看订单', 401, 7, '', '', 'F', 1, 1, 'customer:order:view', '#', ''),

-- 客户跟进按钮
(4021, '跟进查询', 402, 1, '', '', 'F', 1, 1, 'customer:follow:query', '#', ''),
(4022, '跟进新增', 402, 2, '', '', 'F', 1, 1, 'customer:follow:add', '#', ''),
(4023, '跟进修改', 402, 3, '', '', 'F', 1, 1, 'customer:follow:edit', '#', ''),
(4024, '跟进删除', 402, 4, '', '', 'F', 1, 1, 'customer:follow:remove', '#', ''),

-- 订单管理按钮
(5011, '订单查询', 501, 1, '', '', 'F', 1, 1, 'order:query', '#', ''),
(5012, '订单新增', 501, 2, '', '', 'F', 1, 1, 'order:add', '#', ''),
(5013, '订单修改', 501, 3, '', '', 'F', 1, 1, 'order:edit', '#', ''),
(5014, '订单删除', 501, 4, '', '', 'F', 1, 1, 'order:remove', '#', ''),
(5015, '订单导出', 501, 5, '', '', 'F', 1, 1, 'order:export', '#', ''),
(5016, '订单标签', 501, 6, '', '', 'F', 1, 1, 'order:tag', '#', ''),
(5017, '订单审批', 501, 7, '', '', 'F', 1, 1, 'order:approve', '#', ''),

-- 库存管理按钮
(6011, '库存查询', 601, 1, '', '', 'F', 1, 1, 'inventory:query', '#', ''),
(6012, '库存新增', 601, 2, '', '', 'F', 1, 1, 'inventory:add', '#', ''),
(6013, '库存修改', 601, 3, '', '', 'F', 1, 1, 'inventory:edit', '#', ''),
(6014, '库存删除', 601, 4, '', '', 'F', 1, 1, 'inventory:remove', '#', ''),
(6015, '批量编辑', 601, 5, '', '', 'F', 1, 1, 'inventory:batch:edit', '#', ''),
(6016, '发送Offer', 601, 6, '', '', 'F', 1, 1, 'inventory:send:offer', '#', ''),

-- 库存导入按钮
(6021, '导入操作', 602, 1, '', '', 'F', 1, 1, 'inventory:import:upload', '#', ''),
(6022, '下载模板', 602, 2, '', '', 'F', 1, 1, 'inventory:import:template', '#', ''),

-- 库存导出按钮
(6031, '导出操作', 603, 1, '', '', 'F', 1, 1, 'inventory:export:download', '#', ''),

-- 询价管理按钮
(7011, '询价查询', 701, 1, '', '', 'F', 1, 1, 'inquiry:query', '#', ''),
(7012, '询价新增', 701, 2, '', '', 'F', 1, 1, 'inquiry:add', '#', ''),
(7013, '询价修改', 701, 3, '', '', 'F', 1, 1, 'inquiry:edit', '#', ''),
(7014, '询价删除', 701, 4, '', '', 'F', 1, 1, 'inquiry:remove', '#', ''),
(7015, '询价导出', 701, 5, '', '', 'F', 1, 1, 'inquiry:export', '#', ''),
(7016, '询价标签', 701, 6, '', '', 'F', 1, 1, 'inquiry:tag', '#', ''),

-- 报价管理按钮
(7021, '报价查询', 702, 1, '', '', 'F', 1, 1, 'inquiry:quotation:query', '#', ''),
(7022, '报价新增', 702, 2, '', '', 'F', 1, 1, 'inquiry:quotation:add', '#', ''),
(7023, '报价修改', 702, 3, '', '', 'F', 1, 1, 'inquiry:quotation:edit', '#', ''),
(7024, '报价删除', 702, 4, '', '', 'F', 1, 1, 'inquiry:quotation:remove', '#', ''),

-- 供应商管理按钮
(8011, '供应商查询', 801, 1, '', '', 'F', 1, 1, 'supplier:query', '#', ''),
(8012, '供应商新增', 801, 2, '', '', 'F', 1, 1, 'supplier:add', '#', ''),
(8013, '供应商修改', 801, 3, '', '', 'F', 1, 1, 'supplier:edit', '#', ''),
(8014, '供应商删除', 801, 4, '', '', 'F', 1, 1, 'supplier:remove', '#', ''),
(8015, '供应商导出', 801, 5, '', '', 'F', 1, 1, 'supplier:export', '#', '');

-- 给超级管理员分配所有菜单权限
INSERT INTO sys_role_menu (role_id, menu_id)
SELECT 1, id FROM sys_menu WHERE status = 1;

-- 给销售经理分配相关菜单权限
INSERT INTO sys_role_menu (role_id, menu_id) VALUES
-- 首页
(2, 1), (2, 101),
-- 线索管理
(2, 3), (2, 301), (2, 302),
(2, 3011), (2, 3012), (2, 3013), (2, 3014), (2, 3015), (2, 3016), (2, 3017),
(2, 3021), (2, 3022), (2, 3023), (2, 3024),
-- 客户管理
(2, 4), (2, 401), (2, 402),
(2, 4011), (2, 4012), (2, 4013), (2, 4014), (2, 4015), (2, 4016), (2, 4017),
(2, 4021), (2, 4022), (2, 4023), (2, 4024),
-- 订单管理
(2, 5), (2, 501), (2, 502),
(2, 5011), (2, 5012), (2, 5013), (2, 5014), (2, 5015), (2, 5016), (2, 5017),
-- 库存管理
(2, 6), (2, 601), (2, 602), (2, 603),
(2, 6011), (2, 6012), (2, 6013), (2, 6014), (2, 6015), (2, 6016),
(2, 6021), (2, 6022), (2, 6031),
-- 询价管理
(2, 7), (2, 701), (2, 702),
(2, 7011), (2, 7012), (2, 7013), (2, 7014), (2, 7015), (2, 7016),
(2, 7021), (2, 7022), (2, 7023), (2, 7024),
-- 供应商管理
(2, 8), (2, 801),
(2, 8011), (2, 8012), (2, 8013), (2, 8014), (2, 8015),
-- 报表统计
(2, 9), (2, 901), (2, 902), (2, 903);

-- 给销售员分配相关菜单权限
INSERT INTO sys_role_menu (role_id, menu_id) VALUES
-- 首页
(3, 1), (3, 101),
-- 线索管理
(3, 3), (3, 301), (3, 302),
(3, 3011), (3, 3012), (3, 3013), (3, 3015), (3, 3016), (3, 3017),
(3, 3021), (3, 3022), (3, 3023),
-- 客户管理
(3, 4), (3, 401), (3, 402),
(3, 4011), (3, 4012), (3, 4013), (3, 4015), (3, 4016), (3, 4017),
(3, 4021), (3, 4022), (3, 4023),
-- 订单管理
(3, 5), (3, 501),
(3, 5011), (3, 5012), (3, 5013), (3, 5015), (3, 5016),
-- 库存管理（只读）
(3, 6), (3, 601),
(3, 6011), (3, 6016),
-- 询价管理
(3, 7), (3, 701), (3, 702),
(3, 7011), (3, 7012), (3, 7013), (3, 7015), (3, 7016),
(3, 7021), (3, 7022), (3, 7023);

-- 给采购员分配相关菜单权限
INSERT INTO sys_role_menu (role_id, menu_id) VALUES
-- 首页
(4, 1), (4, 101),
-- 订单管理
(4, 5), (4, 501),
(4, 5011), (4, 5013), (4, 5015),
-- 库存管理
(4, 6), (4, 601), (4, 602), (4, 603),
(4, 6011), (4, 6012), (4, 6013), (4, 6014), (4, 6015),
(4, 6021), (4, 6022), (4, 6031),
-- 供应商管理
(4, 8), (4, 801),
(4, 8011), (4, 8012), (4, 8013), (4, 8014), (4, 8015),
-- 询价管理（报价部分）
(4, 7), (4, 702),
(4, 7021), (4, 7022), (4, 7023), (4, 7024);

-- 重置自增ID
ALTER TABLE sys_menu AUTO_INCREMENT = 10000;