# IT分销公司CRM系统需求描述

## 业务背景
我们公司是IT分销公司，不做库存，主要业务模式是：
- 收集客户对SSD、HDD、Memory、CPU、GPU等IT配件的需求
- 向供应商进行询价
- 匹配客户需求与供应商报价后促成交易

## 技术架构
- **后端**: Java 8 + SpringBoot + MyBatis-Plus + MySQL + Lombok
- **前端**: Vue + ElementUI
- **项目结构**: Back-Server(后端) + Front-Server(前端)

## 功能模块详细设计

### 功能零：系统管理
#### 1.1 字典管理
- **字典主表管理**：
  - 字典名称、字典Key、描述、状态（启用/禁用）
  - 创建时间、创建人、更新时间、更新人
- **字典子表管理**：
  - 字典Key、标签Label、备注Remark、排序、状态
  - 支持增删改查操作
- **预设字典类型**：
  - 线索类型、线索状态、客户类型、客户状态
  - 产品分类、品牌、供应商类型、订单状态
  - 跟进结果、询价状态、付款方式、物流方式
  - 客户标签、线索标签、产品标签

#### 1.2 用户权限管理
- **用户管理**：用户信息、角色分配、部门归属
- **角色管理**：角色权限配置、菜单权限、数据权限
- **部门管理**：组织架构管理、上下级关系

#### 1.3 系统配置
- **参数配置**：系统参数设置、业务规则配置
- **操作日志**：用户操作记录、系统异常日志

### 功能一：线索管理
#### 1.1 线索信息管理
- **基础信息**：
  - 线索编号（自动生成）、线索名称、所属国家、线索类型
  - 官网地址、录入人、跟进人、线索状态、线索来源
  - 意向产品（多选）、介绍信息、预估订单金额
  - 创建时间、更新时间、下次跟进时间
- **联系人信息**（支持多个联系人）：
  - 联系人姓名、职位、手机、邮箱、WhatsApp
  - 微信、QQ、其他联系方式、是否主要联系人
- **线索详情弹窗**：展示完整线索信息，支持编辑
- **线索标签**：支持打标签，可以打多个标签，标签支持搜索

#### 1.2 线索跟进管理
- **跟进记录**：
  - 跟进时间、跟进人、跟进方式（电话/邮件/面访/在线）
  - 跟进内容、跟进结论、下次跟进计划
  - 附件上传（合同、报价单等）
- **跟进提醒**：
  - 自动提醒功能、跟进任务分配
  - 跟进统计报表、转化率分析

#### 1.3 线索转客户
- **转化条件验证**：检查必要信息完整性
- **转化确认**：弹窗确认转化，支持信息补充
- **数据迁移**：线索信息自动转为客户信息
- **状态更新**：线索状态更新为"已转客户"

### 功能二：客户管理
#### 2.1 客户信息管理
- **基础信息**：
  - 客户编号、客户名称、客户简称、所属国家/地区
  - 客户类型、官网地址、主营业务、公司规模
  - 录入人、跟进人、客户状态、客户等级（A/B/C级）
  - 意向产品、客户来源、介绍信息、信用额度
  - 创建时间、更新时间、下次跟进时间
- **联系人管理**：支持多联系人，包含详细联系信息
- **客户详情**：点击客户编号弹窗显示完整信息
- **客户标签**：支持对客户打标签，可以打多个标签，标签支持搜索
#### 2.2 客户跟进管理
- **跟进记录**：类似线索跟进，但更详细
- **商务洽谈**：价格谈判记录、合同条款讨论
- **客户评价**：合作满意度、付款及时性评价

#### 2.3 客户订单关联
- **订单快速查看**：点击订单按钮跳转到该客户的订单列表
- **订单统计**：客户历史订单金额、数量统计
- **客户价值分析**：客户贡献度、利润率分析

### 功能三：订单管理
#### 3.1 订单基础信息
- **订单头信息**：
  - 订单编号、客户信息、供应商信息，订单日期、供应商发货日期，供应商到货日期，我发发货日期，客户收货日期，交付日期
  - 订单状态、订单类型、紧急程度、业务员
  - 订单总金额、利润、利润率、付款方式
  - 物流方式、收货地址、特殊要求
- **订单明细**：
  - 产品料号、产品名称、规格型号、品牌
  - 数量、单价、总价、供应商、交期
  - 备注信息
- **标签功能**：支持打标签，可以打多个标签，标签支持搜索

#### 3.2 订单流程管理
- **订单状态流转**：
  - 待确认 → 已确认 → 采购中 → 已采购 → 发货中 → 已发货 → 已收货 → 已完成
- **订单审批**：大额订单审批流程
- **订单变更**：订单修改记录、变更原因

#### 3.3 订单财务管理
- **应收管理**：客户付款记录、应收账款
- **应付管理**：供应商付款记录、应付账款
- **利润分析**：订单利润计算、利润率统计

### 功能四：库存管理（优化）
#### 4.1 库存信息管理
- **基础信息**：
  - ID、料号、产品名称、分类、品牌、规格
  - 供应商编号、供应商名称、联系人、联系方式
  - 库存数量、可用数量、预留数量、安全库存
  - 采购价格、销售价格、交期、发货地
  - 录入日期
  - 状态（在售/停产/缺货）、备注
  - 创建人、创建时间、更新人、更新时间

#### 4.2 库存操作功能
- **库存导入**：Excel批量导入库存信息，导入时候要选择供应商，录入日期（默认当天），选择上传文件， 导入的字段主要是：料号，产品名称，分类，品牌，规格，交期，数量，价格，发货地，备注。但是由于上传的文件提供的库存信息是不固定模板的，因此导入的时候要填入我们要的这几个字段分别属于上传文件的第几个sheet(默认第一个sheet),每一个属于该sheet的第几列（列数用excel的A B C...形式提供），除了料号，其他所有字段都是非必填的
- **库存批量编辑**
    支持批量选择一批库存，批量修改其中分类，品牌，规格，交期，数量，价格，发货地，备注等信息。
- **库存导出**：
  - 自定义导出字段和顺序
  - 支持多种格式（Excel、CSV）

- **发送offer邮件功能**:
    支持在客户列表选择

### 功能五：客户询价管理（扩展）
#### 5.1 询价信息管理
- **询价基础信息**：
  - 询价编号、客户信息、询价日期、有效期
  - 询价人（客户的联系人下拉选择）、跟进人、询价状态、紧急程度
- **询价产品明细**：
  - 产品料号、产品名称、规格、品牌、数量，
  - 目标价格、交期要求、质量要求
- **询价状态**：未处理、处理中、已报价、已接受、已拒绝、已过期
- **报价信息列表**：可支持多个供应商的报价信息增删改查
- **标签功能**：支持打标签，可以打多个标签，标签支持搜索

PS: 客户列表和订单列表除了管理员角色，其他角色都只能看到业务员或者跟进人是自己的数据



## 数据库设计要点
### 主要数据表
1. **系统管理**：sys_dict（字典）、sys_user（用户）、sys_role（角色）
2. **线索管理**：crm_lead（线索）、crm_lead_contact（线索联系人）、crm_lead_follow（线索跟进）
3. **客户管理**：crm_customer（客户）、crm_customer_contact（客户联系人）、crm_customer_follow（客户跟进）
4. **订单管理**：crm_order（订单）、crm_order_item（订单明细）
5. **库存管理**：inv_stock（库存）
6. **询价管理**：crm_inquiry（询价）、crm_inquiry_item（询价明细）、crm_quotation（报价）
7. **供应商管理**：crm_supplier（供应商）、crm_supplier_contact（供应商联系人）

### 关键字段设计
- **编号字段**：统一使用规则生成（如：LD202401001表示2024年1月第1个线索）
- **状态字段**：使用字典管理，便于维护
- **金额字段**：使用DECIMAL类型，保证精度
- **时间字段**：创建时间、更新时间自动维护
- **操作人字段**：记录创建人、更新人信息

## 技术实现要点
### 后端技术要点
1. **统一响应格式**：Result<T>封装返回结果
2. **异常处理**：全局异常处理器
3. **参数校验**：使用Validation进行参数校验
4. **分页查询**：MyBatis-Plus分页插件
5. **代码生成**：MyBatis-Plus代码生成器
6. **接口文档**：Swagger API文档

### 前端技术要点
1. **组件化开发**：封装通用组件
2. **路由管理**：Vue Router权限控制
3. **状态管理**：Vuex状态管理
4. **表格组件**：ElementUI Table高级功能
5. **表单验证**：ElementUI Form验证
6. **文件上传**：支持Excel导入导出

## 部署和运维
### 部署方案
1. **开发环境**：本地开发环境搭建
2. **测试环境**：测试服务器部署
3. **生产环境**：生产服务器部署方案
4. **数据库**：MySQL主从配置、备份策略


